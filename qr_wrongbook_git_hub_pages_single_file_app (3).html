<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>QR Wrongbook</title>
  <meta name="description" content="A customizable wrong-question notebook for Quant Research prep. Switch between light/dark mode. Save text or screenshots, tag by category, difficulty, and mastery.">
  <style>
    :root{
      --bg-light:#f9f9fb; --card-light:#ffffff; --muted-light:#f1f3f6; --muted-2-light:#e9ecf0; --text-light:#1a1a1a; --text-dim-light:#444; --border-light:#d0d7de; --shadow-light:rgba(0,0,0,.08);
      --bg-dark:#0b0f14; --card-dark:#121821; --muted-dark:#10151d; --muted-2-dark:#0d131a; --text-dark:#d6deeb; --text-dim-dark:#9fb0c8; --border-dark:#1f2a37; --shadow-dark:rgba(0,0,0,.5);

      --brand:#0077cc; --accent:#3399ff; --danger:#d32f2f; --ok:#2e7d32; --warn:#ed6c02;
    }
    body.light{--bg:var(--bg-light);--card:var(--card-light);--muted:var(--muted-light);--muted-2:var(--muted-2-light);--text:var(--text-light);--text-dim:var(--text-dim-light);--border:var(--border-light);--shadow:var(--shadow-light)}
    body.dark{--bg:var(--bg-dark);--card:var(--card-dark);--muted:var(--muted-dark);--muted-2:var(--muted-2-dark);--text:var(--text-dark);--text-dim:var(--text-dim-dark);--border:var(--border-dark);--shadow:var(--shadow-dark)}

    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;transition:background .3s,color .3s}
    header{position:sticky;top:0;z-index:5;background:var(--card);border-bottom:1px solid var(--border)}
    .stack{display:flex;gap:.75rem;align-items:center}
    .bar{max-width:960px;margin:0 auto;padding:.75rem 1rem;display:flex;gap:.75rem;align-items:center;justify-content:space-between}
    .brand{display:flex;gap:.5rem;align-items:center;font-weight:600;color:var(--brand)}
    .dot{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 12px var(--brand)}
    .title{font-size:1.05rem;letter-spacing:.5px}
    .btn{border:1px solid var(--border);background:var(--card);color:var(--text);padding:.45rem .8rem;border-radius:.5rem;cursor:pointer;transition:background .2s ease, box-shadow .2s ease;font-size:.9rem}
    .btn:hover{background:var(--muted)}
    .btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}
    .btn.danger{border-color:var(--danger);color:#fff;background:var(--danger)}
    .container{max-width:960px;margin:0 auto;padding:1rem}
    .controls{display:grid;grid-template-columns:1fr;gap:.75rem;margin:1rem 0}
    @media(min-width:840px){.controls{grid-template-columns: 1fr 1fr 1fr auto}}
    .field{background:var(--card);border:1px solid var(--border);border-radius:.5rem;padding:.4rem .6rem;display:flex;gap:.5rem;align-items:center}
    input[type="text"], select, textarea{width:100%;background:transparent;border:none;outline:none;color:var(--text);font-size:.9rem}
    textarea{resize:vertical}
    .chips{display:flex;flex-wrap:wrap;gap:.4rem}
    .chip{padding:.2rem .5rem;border-radius:999px;border:1px solid var(--border);font-size:.75rem;background:var(--muted)}
    .grid{display:grid;grid-template-columns:1fr;gap:.9rem}
    @media(min-width:720px){.grid{grid-template-columns: repeat(2,1fr)}}
    @media(min-width:1040px){.grid{grid-template-columns: repeat(3,1fr)}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:.5rem;overflow:hidden;box-shadow:0 2px 6px var(--shadow)}
    .card .top{padding:.6rem .75rem;border-bottom:1px solid var(--border);display:flex;gap:.6rem;align-items:center;justify-content:space-between}
    .card .top .badges{display:flex;gap:.35rem;flex-wrap:wrap}
    .badge{font-size:.7rem;padding:.2rem .4rem;border-radius:.4rem;border:1px solid var(--border);background:var(--muted)}
    .badge.diff-Easy{background:#e8f5e9;color:#2e7d32}
    .badge.diff-Medium{background:#fff3e0;color:#ed6c02}
    .badge.diff-Hard{background:#ffebee;color:#c62828}
    .badge.diff-Deadly{background:#fbe9e7;color:#b71c1c}
    .badge.cat-Code{background:#e3f2fd;color:#1565c0}
    .badge.cat-Math{background:#ede7f6;color:#4527a0}
    .badge.cat-Behavior.question{background:#f3e5f5;color:#6a1b9a}
    .badge.cat-Machine.Learning{background:#e0f7fa;color:#006064}
    .badge.mastery-Mastered{background:#f1f8e9;color:#33691e}
    .content{padding:.75rem}
    .content p{margin:.3rem 0 .6rem;color:var(--text-dim);font-size:.9rem}
    .thumbs{display:flex;gap:.4rem;flex-wrap:wrap;margin-top:.5rem}
    .thumbs img{height:68px;width:100px;object-fit:cover;border-radius:.3rem;border:1px solid var(--border)}
    .actions{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.6rem}

    dialog{border:none;border-radius:.5rem;max-width:760px;width:95vw;background:var(--card);color:var(--text);padding:0;box-shadow:0 6px 20px var(--shadow)}
    dialog::backdrop{background:rgba(0,0,0,.35)}
    .dlg-head{padding:.75rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;font-weight:600}
    .dlg-body{padding:1rem;display:grid;gap:.75rem}
    .dlg-grid{display:grid;gap:.6rem}
    @media(min-width:720px){.dlg-grid{grid-template-columns:1fr 1fr}}
    .dropzone{border:1px dashed var(--border);border-radius:.5rem;padding:1rem;text-align:center;background:var(--muted)}
    .dropzone.drag{outline:2px dashed var(--accent);outline-offset:4px}
    .previews{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.5rem}
    .previews img{height:80px;width:118px;object-fit:cover;border-radius:.3rem;border:1px solid var(--border)}
    .dlg-foot{padding:.75rem;border-top:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;font-size:.8rem;color:var(--text-dim)}

    footer{opacity:.6;margin:2rem 0;text-align:center;font-size:.8rem}
  </style>
</head>
<body class="light">
  <header>
    <div class="bar">
      <div class="brand"><span class="dot"></span><span class="title">QR Wrongbook</span></div>
      <div class="stack">
        <button class="btn" id="btnAdd">Add Problem</button>
        <button class="btn" id="btnExport">Export</button>
        <button class="btn" id="btnImport">Import</button>
        <button class="btn" id="btnTheme">üåô</button>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="controls">
      <div class="field"><input id="q" type="text" placeholder="Search‚Ä¶"></div>
      <div class="field"><select id="fCategory" multiple>
          <option>Code</option>
          <option>Math</option>
          <option>Behavior question</option>
          <option>Machine Learning</option>
        </select></div>
      <div class="field"><select id="fDifficulty" multiple>
          <option>Easy</option>
          <option>Medium</option>
          <option>Hard</option>
          <option>Deadly</option>
        </select></div>
      <div class="field"><select id="fMastery" multiple>
          <option>Not at all</option>
          <option>A bit</option>
          <option>Slightly unsure</option>
          <option>Calculation error</option>
          <option>Mastered</option>
        </select></div>
    </div>

    <div class="stack" style="justify-content:space-between;margin:.25rem 0 1rem">
      <div class="chips" id="stats"></div>
      <div class="chips">
        <span class="chip">Sort:
          <select id="sort">
            <option value="new">Newest</option>
            <option value="old">Oldest</option>
            <option value="diff">Difficulty</option>
            <option value="mastery">Mastery</option>
            <option value="cat">Category</option>
          </select>
        </span>
        <button class="btn" id="btnClearFilters">Reset</button>
      </div>
    </div>

    <div class="grid" id="list"></div>
  </div>

  <dialog id="dlg"> ... </dialog>
  <input id="importInput" class="hide" type="file" accept="application/json"/>

  <footer>Built for Quant Research prep ‚Äî toggle theme for dark trading-floor vibes ‚ö° v1.1</footer>
  <script>
    const body = document.body;
    const btnTheme = document.getElementById('btnTheme');
    const theme = localStorage.getItem('qr-theme') || 'light';
    body.className = theme;
    btnTheme.textContent = theme==='light'?'üåô':'‚òÄÔ∏è';

    btnTheme.addEventListener('click',()=>{
      const cur = body.classList.contains('light')? 'light':'dark';
      const next = cur==='light'? 'dark':'light';
      body.className = next;
      btnTheme.textContent = next==='light'?'üåô':'‚òÄÔ∏è';
      localStorage.setItem('qr-theme', next);
    });
  </script>
</body>
</html>
